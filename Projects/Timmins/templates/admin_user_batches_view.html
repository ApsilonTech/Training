<!DOCTYPE html>
<html lang="en">

<head>

   <!-- META ============================================= -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="keywords" content="" />
   <meta name="author" content="" />
   <meta name="robots" content="" />

   <!-- DESCRIPTION -->
   <meta name="description" content="" />

   <!-- OG -->
   <meta property="og:title" content="" />
   <meta property="og:description" content="" />
   <meta property="og:image" content="" />
   <meta name="format-detection" content="telephone=no">

    <!--------FAVICON------------------------->
    <link rel="icon" href="static/assets/images/timmins_favicon.ico" type="image/x-icon" />
	<link rel="shortcut icon" type="image/x-icon" href="static/assets/images/timmins_favicon.png" />

   <!-- PAGE TITLE HERE ============================================= -->
   <title>Timmins: admin-user-batches-view </title>

   <!-- MOBILE SPECIFIC ============================================= -->
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <!--[if lt IE 9]>
   <script src="static/assets/js/html5shiv.min.js"></script>
   <script src="static/assets/js/respond.min.js"></script>
   <![endif]-->

   <!-- All PLUGINS CSS ============================================= -->
   <link rel="stylesheet" type="text/css" href="static/assets/css/admin-assets.css">
   <link rel="stylesheet" type="text/css" href="static/assets/vendors/calendar/fullcalendar.css">

   <!-- TYPOGRAPHY ============================================= -->
   <link rel="stylesheet" type="text/css" href="static/assets/css/admin-typography.css">

   <!-- SHORTCODES ============================================= -->
   <link rel="stylesheet" type="text/css" href="static/assets/css/shortcodes/admin-shortcodes.css">

   <!-- STYLESHEETS ============================================= -->
   <link rel="stylesheet" type="text/css" href="static/assets/css/admin-style.css">
   <link rel="stylesheet" type="text/css" href="static/assets/css/admin-dashboard.css">
   <link class="skin" rel="stylesheet" type="text/css" href="static/assets/css/color/admin-color-1.css">
   <style>
      table{
         border-collapse: collapse;
         width: 100%;
      }
      td, th{
         border: 1px solid #dddddd;
         text-align: left;
         padding: 8px;
      }
      tr:nth-child(even){
         background-color: #E8E8E8;
      }
      .first-delete-btn{
        border: 2px solid;
        padding: 5px 10px;
        display: inline-block;
        color: #f63333;
        border-radius: 4px;
      }
   </style>
</head>
<body class="ttr-opened-sidebar ttr-pinned-sidebar">

   <!-- header start -->
   <header class="ttr-header">
      <div class="ttr-header-wrapper">
         <!--sidebar menu toggler start -->
         <div class="ttr-toggle-sidebar ttr-material-button">
            <i class="ti-close ttr-open-icon"></i>
            <i class="ti-menu ttr-close-icon"></i>
         </div>
         <!--sidebar menu toggler end -->
         <!--logo start -->

         <!--logo end -->
         <div class="ttr-header-menu">
            <!-- header left menu start -->
            <ul class="ttr-header-navigation">
               <li>
                  <a href="/" class="ttr-material-button ttr-submenu-toggle">HOME</a>
               </li>

            </ul>
            <!-- header left menu end -->
         </div>
         <div class="ttr-header-right ttr-with-seperator">
            <!-- header right menu start -->

            <!-- header right menu end -->
         </div>
         <!--header search panel start -->
         <div class="ttr-search-bar">
            <form class="ttr-search-form">
               <div class="ttr-search-input-wrapper">
                  <input type="text" name="qq" placeholder="search something..." class="ttr-search-input">
                  <button type="submit" name="search" class="ttr-search-submit"><i class="ti-arrow-right"></i></button>
               </div>
               <span class="ttr-search-close ttr-search-toggle">
                  <i class="ti-close"></i>
               </span>
            </form>
         </div>
         <!--header search panel end -->
      </div>
   </header>
   <!-- header end -->
   <!-- Left sidebar menu start -->
   <div class="ttr-sidebar">
      <div class="ttr-sidebar-wrapper content-scroll">
         <!-- side menu logo start -->
         <div class="ttr-sidebar-logo">
            <a href="/"><img alt="" src="static/assets/timmins_images/logo.png" width="70" height="15"></a>
            <!-- <div class="ttr-sidebar-pin-button" title="Pin/Unpin Menu">
               <i class="material-icons ttr-fixed-icon">gps_fixed</i>
               <i class="material-icons ttr-not-fixed-icon">gps_not_fixed</i>
            </div> -->
            <div class="ttr-sidebar-toggle-button">
               <i class="ti-arrow-left"></i>
            </div>
         </div>
         <!-- side menu logo end -->
         <!-- sidebar menu start -->
         <nav class="ttr-sidebar-navi">
            <ul>
               <li>
                  <a href="/admin_panel?email_person=admin" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-home"></i></span>
                         <span class="ttr-label">Dashboard</span>
                      </a>
                  </li>
               <li>
                  <a href="courses.html" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-plus"></i></span>
                         <span class="ttr-label">Domains</span>
                            <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                      </a>
                        <ul>
                         <li>
                            <a href="/admin_domain_create?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Add New</span></a>
                         </li>
                         <li>
                            <a href="/admin_domain_view?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit</span></a>
                         </li>
                      </ul>
                  </li>
               <li>
                  <a href="courses.html" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-book"></i></span>
                         <span class="ttr-label">Courses</span>
                            <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                      </a>
                        <ul>
                         <li>
                            <a href="/admin_new_course_upload?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Add New</span></a>
                         </li>
                         <li>
                            <a href="/admin_courses_main?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit</span></a>
                         </li>
                      </ul>
                  </li>
                    <li>
                  <a href="#" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-calendar"></i></span>
                         <span class="ttr-label">Training Calendar</span>
                     <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                      </a>
                  <ul>
                     <li>
                            <a href="/admin_training_calendar_new?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Add New</span></a>
                         </li>
                     <li>
                            <a href="/admin_calendar_list_view?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit</span></a>
                         </li>
                         <li>
                            <a href="/admin_basic_calendar?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-calendar"></i>&nbsp;Calendar View</span></a>
                         </li>
                      </ul>
                  </li>
               <li>
                  <a href="#" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-user"></i></span>
                         <span class="ttr-label">Users</span>
                     <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                      </a>
                  <ul>
                      <li>
                         <a href="/admin_user_display_list?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;&nbsp;Display Users</span></a>
                      </li>
                     <li>
                        <a href="/admin_user_calendar_create?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;&nbsp;Create User Calendar</span></a>
                     </li>
                      <li>
                         <a href="/admin_event_users_mapping?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;&nbsp;Event Users Mapping</span></a>
                      </li>
                  </ul>
                  </li>
                    <li>
                  <a href="#" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-book"></i></span>
                         <span class="ttr-label">Certification Programs</span>
                     <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                      </a>
                  <ul>
                         <li>
                            <a href="/admin_certification_create_new?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Add New</span></a>
                         </li>
                         <li>
                            <a href="/admin_certification_view?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit</span></a>
                         </li>
                      </ul>
                  </li>
               <li>
                  <a href="/admin_banner_creation?email_person=admin" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-book"></i></span>
                     <span class="ttr-label">Banner</span>
                  </a>
               </li>
                <li>
                  <a href="#" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-comment"></i></span>
                     <span class="ttr-label">Testimonials</span>
                     <span class="ttr-arrow-icon"><i class="fa fa-angle-down"></i></span>
                  </a>
                  <ul>
                         <li>
                            <a href="/admin_testimonial_creation?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Add New</span></a>
                         </li>
                         <li>
                            <a href="/admin_testimonial_view?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit</span></a>
                         </li>
                      <li>
                            <a href="/admin_testimonial_for_individual_course_creation?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-plus"></i>&nbsp;Create for Individual courses</span></a>
                         </li>
                        <li>
                            <a href="/admin_testimonial_for_individual_course_edition?email_person=admin" class="ttr-material-button"><span class="ttr-label"><i class="ti ti-pencil"></i>&nbsp;Edit for Individual courses</span></a>
                         </li>
                  </ul>
               </li>
                <li>
                   <a href="/admin_seo?email_person=admin" class="ttr-material-button">
                      <span class="ttr-icon"><i class="ti-book"></i></span>
                      <span class="ttr-label">SEO Code</span>
                   </a>
                </li>
               <li>
                  <a href="/admin_user_profile?email_person=admin" class="ttr-material-button">
                     <span class="ttr-icon"><i class="ti-user"></i></span>
                         <span class="ttr-label">Profile</span>
                      </a>
                  </li>


                  <li class="ttr-seperate"></li>
            </ul>
            <!-- sidebar menu end -->
         </nav>
         <!-- sidebar menu end -->
      </div>
   </div>
   <!-- Left sidebar menu end -->

   <!--Main container start -->
   <main class="ttr-wrapper">
      <div class="container-fluid">
         <div class="row">
            <!-- Your Profile Views Chart -->
            <div class="col-lg-12 m-b30">
               <div class="widget-box">
                  <div class="wc-title row">
                      <div class="col-lg-8 col-sm-8">
                          <h2 style="font-size: 30px;margin-bottom: 20px;">
                              Individual User's Mapped Batches
                          </h2>
                      </div>
                      <div class="col-lg-2 col-md-2">
                         <form action="/admin_user_display_list">
                             <input type="hidden" name="email_person" value="admin">
                             <button type="submit" style="border-radius:5px; background-color:#1d1a4e;color:white;">
                                 Go Back
                             </button>
                         </form>
                     </div>
                      <div class="col-lg-2 col-sm-2">
                          <button class="btn" id="create_event_batch_btn" style="background-color:#1d1a4e;" onclick="createEventBatchFunc()">
                              <a href="#newEventBatch" style="color:white;"><i class="ti ti-plus">&nbsp;Create Event Batch</i></a>
                          </button>
                      </div>
                  </div>
                  <div class="widget-inner">
                    <div>
                      <form>
                          <input type="hidden" name="user_id" value="{{user_id}}">
                          <div class="row placeani">
                              <div class="col-lg-2 col-md-2">
                                  <div class="form-group">
                                      <label>First Name</label>
                                  </div>
                              </div>
                              <div class="col-lg-4 col-md-4">
                                  <div class="form-group">
                                     <div class="input-group">
                                         <input type="text" name="first_name" value="{{user_details[0]}}" readonly>
                                     </div>
                                  </div>
                              </div>
                              <div class="col-lg-2 col-md-2">
                                  <div class="form-group">
                                      <label>Last Name</label>
                                  </div>
                              </div>
                              <div class="col-lg-4 col-md-4">
                                  <div class="form-group">
                                      <div class="input-group">
                                          <input type="text" name="last_name" value="{{user_details[1]}}" readonly>
                                      </div>
                                  </div>
                              </div>
                          </div>
                        <div class="row placeani">
                          <div class="col-lg-2 col-md-2">
                            <label>Email</label>
                          </div>
                          <div class="col-lg-6 col-md-6">
                              <div class="form-group">
                                  <div class="input-group">
                                      <input type="text" name="last_name" value="{{user_details[2]}}" style="width:300px;" readonly>
                                  </div>
                              </div>
                          </div>
                        </div>
                      </form>
                    </div><br>
                    <div>
                        <table>
                          <tr>
                              <th>Event And Batch Name</th>
                              <th>Delete Batch</th>
                          </tr>
                          {% for user_batch_loop in user_batch_list %}
                              <tr>
                                  <form action="/admin_user_batch_delete?email_person=admin" method="post" id="user-batch-form-{{ loop.index }}">
                                      <input type="hidden" name="user_batch_id" value="{{user_batch_loop[0]}}">
                                      <input type="hidden" name="user_id" value="{{user_id}}">
                                      <td>
                                          {{user_batch_loop[1]}}
                                      </td>
                                      <td>
                                          <button type="button" onclick="showConfirmation('{{ loop.index }}')" style="border:none; background-color: transparent;">  <!-- border-radius:5px; -->
                                              <i class="fa fa-trash" style="font-size:24px;"></i>
                                          </button>
                                      </td>
                                  </form>
                              </tr>
                          {% endfor %}
                      </table>
                    </div>
                    <div id="newEventBatch" style="display:none;border: 2px solid; border-radius: 5px; padding:10px;">
                          <form action="/admin_user_batches_view_update" method="post">
                              <input type="hidden" name="user_id" value="{{user_id}}">
                              <div class="row placeani">
                                  <div class="col-lg-3 col-md-3">
                                      <div class="form-group">
                                          <label><h4>Select Event Batch</h4></label>
                                      </div>
                                  </div>
                                  <div class="col-lg-4 col-md-4">
                                      <div class="form-group">
                                          <div class="input-group">
                                             <select id="event_batch" name="event_batch" class="selectpicker" data-live-search="true">
                                                 <option id="no_event_batch" selected disabled value="">Select Event Batch</option>
                                                 {% for concat_loop in all_concat_list %}
                                                 <option value="{{concat_loop[0]}}">{{concat_loop[1]}}</option>
                                                 {% endfor %}
                                             </select>
                                          </div>
                                       </div>
                                  </div>
                                  <div class="col-lg-3 col-md-3">
                                    <button type="button" class="btn-secondry add-item m-r5" onclick="AddEventBatch()">
                                        <i class="fa fa-fw fa-plus-circle"></i>
                                        Add Event Batch
                                    </button>
                                 </div>
                                 <div class="col-lg-2" style="padding:5px;">
                                     <button type="button" onclick="closeSelectEventBatch()">
                                         <i class="fa fa-close" style="color:red;"></i>
                                     </button>
                                 </div>
                              </div>
                              <div id="eventBatchDiv">

                              </div>
                              <div class="">
                                <div class="">
                                   <div class="row text-center">
                                     <div class="col-12 col-sm-9 col-md-9 col-lg-7">
                                       <button id="create" type="submit" class="btn" disabled>Create</button>
                                     </div>
                                   </div>
                                </div>
                              </div>
                          </form>
                    </div>
                  </div>
               </div>
                  <div class="modal fade review-bx-reply" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                     <div class="modal-dialog" role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Reply to review</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body">
                              <textarea class="form-control" placeholder="Type text"></textarea>
                           </div>
                           <div class="modal-footer">
                              <button type="button" class="btn mr-auto">Reply</button>
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
         </div>
          <!-- Your Profile Views Chart END-->
      </div>
   </main>
   <div class="ttr-overlay"></div>

<!-- External JavaScripts -->
<script src="static/assets/js/jquery.min.js"></script>
<script src="static/assets/vendors/bootstrap/js/popper.min.js"></script>
<script src="static/assets/vendors/bootstrap/js/bootstrap.min.js"></script>
<script src="static/assets/vendors/bootstrap-select/bootstrap-select.min.js"></script>
<script src="static/assets/vendors/admin-bootstrap-touchspin/jquery.bootstrap-touchspin.js"></script>
<script src="static/assets/vendors/magnific-popup/magnific-popup.js"></script>
<script src="static/assets/vendors/counter/waypoints-min.js"></script>
<script src="static/assets/vendors/counter/counterup.min.js"></script>
<script src="static/assets/vendors/imagesloaded/imagesloaded.js"></script>
<script src="static/assets/vendors/masonry/masonry.js"></script>
<script src="static/assets/vendors/masonry/filter.js"></script>
<script src="static/assets/vendors/owl-carousel/owl.carousel.js"></script>
<script src='static/assets/vendors/scroll/scrollbar.min.js'></script>
<script src="static/assets/js/admin-functions.js"></script>
<script src="static/assets/vendors/chart/chart.min.js"></script>
<script src="static/assets/js/admin.js"></script>
<script>
    if ("{{update_alert}}" == "yes_deleted"){
       alert("Details successfully deleted.")
    } else if ("{{update_alert}}" == "yes_updated"){
        alert("Details successfully updated.")
    }

    function showConfirmation(index) {
      if (confirm("Are you sure you want to delete this event batch?")) {
        var form = document.getElementById("user-batch-form-" + index);
        var input = document.createElement("input");
        input.type = "hidden";
        input.name = "action";
        input.value = "delete";
        form.appendChild(input);
        form.submit();
      }
    }

    function createEventBatchFunc(){
        document.getElementById("newEventBatch").style.display = "block";
        document.getElementById("create_event_batch_btn").disabled = true;
    }

    function closeSelectEventBatch(){
        document.getElementById("create_event_batch_btn").disabled = false;
        document.getElementById("newEventBatch").style.display = "none";

    }

    var eventBatchValue = 1;

    function AddEventBatch() {
      document.getElementById('create').disabled = false;

      var selectElement = document.getElementById("event_batch");
      var selectedIndex = selectElement.selectedIndex;      // Get the selected option index
      var selectedOption = selectElement.options[selectedIndex];        // Get the selected option element
      var event_batch_name = selectedOption.text;       // Get the text and value of the selected option
      var batch_id = selectedOption.value;

      iBatch = eventBatchValue;
      var batches = '<div id="batch' + iBatch + '" style="border: 1px solid #dddddd;padding:10px;"><div class="row placeani"><div class="col-lg-3"><div class="form-group"><label class="list-item-head-value">Selected Event Batch ' + iBatch + '</label></div></div><div class="col-lg-6"><div class="form-group"><div class="input-group"><input id="event_batch_name' + iBatch + '" name="event_batch_names" value="' + event_batch_name + '" type="text" required="" class="form-control" readonly><input id="batch_id' + iBatch + '" name="batch_ids" value="' + batch_id + '" type="hidden" required="" class="form-control"></div></div></div><div class="col-lg-3 delete-div form-group-delete"><button class="delete" id="eventBatchDelete'+iBatch+'" onclick="DeleteBatch(iBatch)"><i class="fa fa-close"></i></button></div></div></div><br>';
      $('#eventBatchDiv').append(batches);
      eventBatchValue++;
    }

    function DeleteBatch(iBatch) {
      return function() {
        var batchId = 'batch' + iBatch;
        var batchElement = $('#' + batchId);
        batchElement.remove();

        $('.list-item-head-value').each(function(index) {
            $(this).text('Selected Event Batch ' + (index + 1));
        });

        eventBatchValue--;
      };
    }

    $(document).on('click', '.delete', function() {
      var button = $(this);
      var batchId = button.attr('id').replace('eventBatchDelete', '');
      var batchNumber = parseInt(batchId);

      DeleteBatch(batchNumber)();
    });



     $(document).ready(function() {
        $('.selectpicker').selectpicker();
        $('.bs-searchbox input').on('input', function() {
          var searchValue = $(this).val().toLowerCase();
          $('.selectpicker option').each(function() {
            var optionText = $(this).text().toLowerCase();
            if (optionText.includes(searchValue)) {
              $(this).show();
            } else {
              $(this).hide();
            }
          });
          $('.selectpicker').selectpicker('refresh');
        });
      });
</script>
</body>

</html>